<!DOCTYPE html>
<html>
<head>
    <title>Fetch Example</title>
    <script src="outputtest2.js"></script>
</head>
<body>
    <h1>Fetch Example</h1>
    <pre id="response"></pre>

    <script>
        // Create a typed array to store the response data
        let responseData;

        // Wait for the Emscripten module to be ready
        Module.onRuntimeInitialized = function() {
            // Replace 'YOUR_API_KEY' and 'YOUR_PROMPT' with your actual OpenAI API key and prompt
            const apiKey = '';
            const prompt = 'HELLO!';

            // Function called from C++ to handle the response
            Module['handleResponse'] = function(response) {
                // Display the response in the HTML page
                const responseElement = document.getElementById('response');
                responseElement.textContent = JSON.parse(response).choices[0].text;
            };

            // Call the C++ function to send the fetch request
            Module.ccall('sendFetchRequest', 'void', ['string', 'string'], [apiKey, prompt]);
        };
    </script>
</body>
</html>
